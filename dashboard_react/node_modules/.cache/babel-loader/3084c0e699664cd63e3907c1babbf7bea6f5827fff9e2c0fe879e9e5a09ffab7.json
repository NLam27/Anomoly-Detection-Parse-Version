{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'http://localhost:8000/api';\n\n// Configure axios to handle CSRF tokens\naxios.defaults.withCredentials = true;\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\naxios.defaults.headers.common['Content-Type'] = 'application/json';\nexport const analyzeTraffic = async features => {\n  try {\n    var _document$cookie$spli;\n    // First, get the CSRF token\n    const csrfResponse = await axios.get(`${API_BASE_URL}/analyze/`, {\n      withCredentials: true\n    });\n\n    // Then make the POST request with the features\n    const response = await axios.post(`${API_BASE_URL}/analyze/`, {}, {\n      withCredentials: true,\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': ((_document$cookie$spli = document.cookie.split('csrftoken=')[1]) === null || _document$cookie$spli === void 0 ? void 0 : _document$cookie$spli.split(';')[0]) || ''\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error analyzing traffic:', error);\n    if (axios.isAxiosError(error)) {\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        throw new Error(error.response.data.error || 'Server error occurred');\n      } else if (error.request) {\n        // The request was made but no response was received\n        throw new Error('No response from server. Please check if the backend is running.');\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        throw new Error('Error setting up the request: ' + error.message);\n      }\n    }\n    throw new Error('An unexpected error occurred');\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","defaults","withCredentials","xsrfCookieName","xsrfHeaderName","headers","common","analyzeTraffic","features","_document$cookie$spli","csrfResponse","get","response","post","document","cookie","split","data","error","console","isAxiosError","Error","request","message"],"sources":["/home/siunhandone/DDoS-Detection-With-AI/dashboard_react/src/api/trafficAnalysis.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8000/api';\n\n// Configure axios to handle CSRF tokens\naxios.defaults.withCredentials = true;\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\nexport interface TrafficAnalysisResult {\n  prediction: string;\n  confidence: number;\n  probabilities: {\n    normal: number;\n    attack: number;\n  };\n  input_values: TrafficFeatures;\n}\n\nexport interface TrafficFeatures {\n  'Bwd Packet Length Min': number;\n  'Bwd Packet Length Std': number;\n  'Init Win bytes forward': number;\n  'Init Win bytes backward': number;\n  'Fwd PSH Flags': number;\n  'Average Packet Size': number;\n  'PSH Flag Count': number;\n  'Bwd Packets/s': number;\n  'Bwd Header Length': number;\n  'Bwd Packet Length Mean': number;\n  'Fwd Header Length': number;\n  'Packet Length Std': number;\n  'Packet Length Mean': number;\n  'Avg Bwd Segment Size': number;\n  'Fwd Header Length 1': number;\n  'min seg size forward': number;\n  'Bwd Packet Length Max': number;\n  'Packet Length Variance': number;\n  'Fwd Packet Length Max': number;\n  'Fwd Packet Length Mean': number;\n  'Flow Bytes/s': number;\n  'Fwd IAT Min': number;\n  'Total Length of Fwd Packets': number;\n  'Flow IAT Mean': number;\n}\n\nexport const analyzeTraffic = async (features: TrafficFeatures): Promise<TrafficAnalysisResult> => {\n  try {\n    // First, get the CSRF token\n    const csrfResponse = await axios.get(`${API_BASE_URL}/analyze/`, {\n      withCredentials: true\n    });\n    \n    // Then make the POST request with the features\n    const response = await axios.post(`${API_BASE_URL}/analyze/`, {}, {\n      withCredentials: true,\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': document.cookie.split('csrftoken=')[1]?.split(';')[0] || ''\n      }\n    });\n    \n    return response.data;\n  } catch (error) {\n    console.error('Error analyzing traffic:', error);\n    if (axios.isAxiosError(error)) {\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        throw new Error(error.response.data.error || 'Server error occurred');\n      } else if (error.request) {\n        // The request was made but no response was received\n        throw new Error('No response from server. Please check if the backend is running.');\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        throw new Error('Error setting up the request: ' + error.message);\n      }\n    }\n    throw new Error('An unexpected error occurred');\n  }\n}; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG,2BAA2B;;AAEhD;AACAD,KAAK,CAACE,QAAQ,CAACC,eAAe,GAAG,IAAI;AACrCH,KAAK,CAACE,QAAQ,CAACE,cAAc,GAAG,WAAW;AAC3CJ,KAAK,CAACE,QAAQ,CAACG,cAAc,GAAG,aAAa;AAC7CL,KAAK,CAACE,QAAQ,CAACI,OAAO,CAACC,MAAM,CAAC,cAAc,CAAC,GAAG,kBAAkB;AAuClE,OAAO,MAAMC,cAAc,GAAG,MAAOC,QAAyB,IAAqC;EACjG,IAAI;IAAA,IAAAC,qBAAA;IACF;IACA,MAAMC,YAAY,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,YAAY,WAAW,EAAE;MAC/DE,eAAe,EAAE;IACnB,CAAC,CAAC;;IAEF;IACA,MAAMU,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAI,CAAC,GAAGb,YAAY,WAAW,EAAE,CAAC,CAAC,EAAE;MAChEE,eAAe,EAAE,IAAI;MACrBG,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,aAAa,EAAE,EAAAI,qBAAA,GAAAK,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,cAAAP,qBAAA,uBAAtCA,qBAAA,CAAwCO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAI;MAC1E;IACF,CAAC,CAAC;IAEF,OAAOJ,QAAQ,CAACK,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChD,IAAInB,KAAK,CAACqB,YAAY,CAACF,KAAK,CAAC,EAAE;MAC7B,IAAIA,KAAK,CAACN,QAAQ,EAAE;QAClB;QACA;QACA,MAAM,IAAIS,KAAK,CAACH,KAAK,CAACN,QAAQ,CAACK,IAAI,CAACC,KAAK,IAAI,uBAAuB,CAAC;MACvE,CAAC,MAAM,IAAIA,KAAK,CAACI,OAAO,EAAE;QACxB;QACA,MAAM,IAAID,KAAK,CAAC,kEAAkE,CAAC;MACrF,CAAC,MAAM;QACL;QACA,MAAM,IAAIA,KAAK,CAAC,gCAAgC,GAAGH,KAAK,CAACK,OAAO,CAAC;MACnE;IACF;IACA,MAAM,IAAIF,KAAK,CAAC,8BAA8B,CAAC;EACjD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}